<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R641V1KFSP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-R641V1KFSP');
</script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Need a Tutor - OlympiadPrep</title>
  <link rel="stylesheet" href="styles.css" />

  <style>
    /* ===== Site palette (aligned with other pages) ===== */
    :root{
      --fg:#0f172a;           /* main text */
      --muted:#64748b;        /* secondary text */
      --grid:#e5e7eb;         /* borders */
      --soft:#f8fafc;         /* soft background */
      --card:#ffffff;         /* cards */
      --accent:#0ea5e9;       /* cyan */
      --cta:#2563eb;          /* indigo CTA */
      --cta-2:#1d4ed8;
      --ring:#93c5fd;         /* focus ring */
      --shadow:0 8px 30px rgba(2,6,23,.06);
    }
    html,body{background:#fff;color:var(--fg)}
    .container{max-width:1100px;margin:0 auto;padding:0 16px}

    /* ===== Header (same as site) ===== */
    .site-header{
      position:sticky; top:0; z-index:10;
      background: linear-gradient(90deg,#3b82f6 0%, #6366f1 100%) !important;
      color:#fff; padding:12px 0; margin-bottom:0;
    }
    .site-header .container{
      display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;
    }
    .brand-nav{ display:flex; align-items:center; gap:16px; flex-wrap:wrap; }
    .logo{ font-weight:800; letter-spacing:.2px; color:#fff; }
    .site-nav{ display:flex; gap:14px; flex-wrap:wrap; }
    .site-nav a{ color:#fff; text-decoration:none; font-weight:600; opacity:.95 }
    .site-nav a:hover{ opacity:1; text-decoration:underline }
    .site-nav a.active{ border-bottom:2px solid rgba(255,255,255,.9); padding-bottom:2px }
    #auth-slot{ display:flex; align-items:center; gap:10px; min-height:32px }

    /* ===== Hero (one clear header; no second header line) ===== */
    .hero{
      background: linear-gradient(180deg, rgba(99,102,241,.10), rgba(99,102,241,0));
      padding:22px 0 12px;
      border-bottom:1px solid var(--grid);
    }
    .hero h1{
      margin:.2rem 0; font-size:clamp(1.6rem, 1.2rem + 1.8vw, 2.1rem);
      display:flex; align-items:center; gap:10px; color:var(--fg);
    }
    .badge-row{ display:flex; gap:8px; flex-wrap:wrap; margin:8px 0 4px }
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      background:#eef2ff; color:#1e293b; border:1px solid var(--grid);
      padding:6px 10px; border-radius:999px; font-size:.86rem; font-weight:600;
    }
    .badge .dot{ width:8px; height:8px; border-radius:50%; background:#3b82f6 }

    /* ===== Layout: form + info card ===== */
    main{ padding:18px 0 24px }
    .grid{ display:grid; grid-template-columns:1.1fr .9fr; gap:16px; align-items:start }
    @media (max-width:900px){ .grid{ grid-template-columns:1fr } }

    .card{
      background:var(--card); border:1px solid var(--grid); border-radius:16px;
      box-shadow:var(--shadow); padding:16px;
    }
    .side h3{ margin:.25rem 0 .65rem; font-size:1.1rem }
    .side p, .side li{ color:var(--fg) }
    .side .muted{ color:var(--muted) }
    .bullet{ margin:0; padding-left:18px }
    .bullet li{ margin:.45rem 0; line-height:1.4 }
    .side a{ color:#2563eb; text-decoration:underline }

    /* ===== Form ===== */
    .tutor-form{ display:grid; gap:12px; }
    .two-col{ display:grid; grid-template-columns:1fr 1fr; gap:12px }
    @media (max-width:700px){ .two-col{ grid-template-columns:1fr } }
    .form-group{ display:grid; gap:6px }
    .tutor-form label{ color:var(--fg); font-weight:700 }
    .note{ color:var(--muted); font-weight:500; margin-left:.25rem }

    .tutor-form input, .tutor-form select, .tutor-form textarea{
      border:1px solid var(--grid); border-radius:12px; padding:11px 12px;
      background:#fff; color:var(--fg); transition:border-color .15s, box-shadow .15s;
    }
    .tutor-form input::placeholder, .tutor-form textarea::placeholder{ color:#94a3b8 }
    .tutor-form input:focus, .tutor-form select:focus, .tutor-form textarea:focus{
      outline:none; border-color:#93c5fd; box-shadow:0 0 0 4px rgba(147,197,253,.35);
    }

    .btn{
      cursor:pointer; border:0; background:linear-gradient(90deg, var(--cta) 0%, var(--cta-2) 100%);
      color:#fff; padding:11px 16px; border-radius:12px; font-weight:800; letter-spacing:.2px;
      box-shadow:0 6px 18px rgba(37,99,235,.22); transition:transform .06s ease, filter .2s ease;
    }
    .btn:hover{ filter:brightness(1.05) }
    .btn:active{ transform:translateY(1px) }

    .success, .error{ margin-top:10px; padding:10px 12px; border-radius:10px; display:none }
    .success{ background:#ecfdf5; border:1px solid #a7f3d0; color:#065f46 }
    .error{ background:#fef2f2; border:1px solid #fecaca; color:#7f1d1d }

    /* Anti-bot */
    .hp-wrap{ position:absolute; left:-9999px; width:1px; height:1px; overflow:hidden }

    /* Print */
    @media print{
      .site-header,.badge-row{ display:none !important }
      .card{ box-shadow:none; border:1px solid var(--grid) }
    }
  </style>
</head>

<body>
  <!-- ===== Header ===== -->
  <header class="site-header">
    <div class="container">
      <div class="brand-nav">
        <h1 class="logo">OlympiadPrep</h1>
        <nav class="site-nav">
          <a href="index.html">Home</a>
          <a href="timeline.html">Timeline</a>
          <a href="tutor.html" class="active">Need a Tutor</a>
          <a href="books.html">Books</a>
        </nav>
      </div>
      <div id="auth-slot"></div>
    </div>
  </header>

  <!-- ===== Hero (single clean header, badges instead of second header) ===== -->
  <section class="hero">
    <div class="container">
      <h1>üë©‚Äçüè´ Need a Tutor?</h1>
      <div class="badge-row">
        <span class="badge"><span class="dot"></span> AMC 8/10/12 ‚Üí AIME ‚Üí US(A)JMO</span>
        <span class="badge"><span class="dot"></span> 1:1 online mentoring</span>
        <span class="badge"><span class="dot"></span> Aligns to your study timeline</span>
      </div>
    </div>
  </section>

  <main class="container">
    <div class="grid">
      <!-- ===== Left: Form ===== -->
      <section class="card">
        <form id="tutor-form" class="tutor-form" novalidate>
          <!-- Required -->
          <div class="two-col">
            <div class="form-group">
              <label for="name">Name <span class="note">(required)</span></label>
              <input type="text" id="name" name="name" autocomplete="name" required />
            </div>
            <div class="form-group">
              <label for="email">Email <span class="note">(required)</span></label>
              <input type="email" id="email" name="email" autocomplete="email" required />
            </div>
          </div>

          <!-- Optional extras -->
          <div class="two-col">
            <div class="form-group">
              <label for="gradeLevel">Grade level <span class="note">(optional)</span></label>
              <select id="gradeLevel" name="gradeLevel">
                <option value="">Select‚Ä¶</option>
                <option>Middle school</option>
                <option>9th grade</option>
                <option>10th grade</option>
                <option>11th grade</option>
                <option>12th grade</option>
                <option>Gap year</option>
                <option>College</option>
                <option>Other</option>
              </select>
            </div>
            <div class="form-group">
              <label for="state">State <span class="note">(optional)</span></label>
              <select id="state" name="state">
                <option value="">Select‚Ä¶</option>
                <option>AL</option><option>AK</option><option>AZ</option><option>AR</option><option>CA</option>
                <option>CO</option><option>CT</option><option>DE</option><option>DC</option><option>FL</option>
                <option>GA</option><option>HI</option><option>ID</option><option>IL</option><option>IN</option>
                <option>IA</option><option>KS</option><option>KY</option><option>LA</option><option>ME</option>
                <option>MD</option><option>MA</option><option>MI</option><option>MN</option><option>MS</option>
                <option>MO</option><option>MT</option><option>NE</option><option>NV</option><option>NH</option>
                <option>NJ</option><option>NM</option><option>NY</option><option>NC</option><option>ND</option>
                <option>OH</option><option>OK</option><option>OR</option><option>PA</option><option>RI</option>
                <option>SC</option><option>SD</option><option>TN</option><option>TX</option><option>UT</option>
                <option>VT</option><option>VA</option><option>WA</option><option>WV</option><option>WI</option>
                <option>WY</option><option>Outside US</option>
              </select>
            </div>
          </div>

          <div class="two-col">
            <div class="form-group">
              <label for="school">School <span class="note">(optional)</span></label>
              <input type="text" id="school" name="school" placeholder="e.g., Lincoln High School" />
            </div>
            <div class="form-group">
              <label for="classes">Previous / Current math classes <span class="note">(optional)</span></label>
              <input type="text" id="classes" name="classes" placeholder="e.g., Algebra II, Precalculus, AoPS Intro NT" />
            </div>
          </div>

          <div class="form-group">
            <label for="needs">What do you need help with? <span class="note">(required)</span></label>
            <textarea id="needs" name="needs" rows="4" required placeholder="Topics, contests, goals, meeting times‚Ä¶"></textarea>
          </div>

          <!-- Anti-bot honeypot -->
          <div class="hp-wrap">
            <label>Leave this field empty:
              <input type="text" name="_gotcha" tabindex="-1" autocomplete="off">
            </label>
          </div>

          <button type="submit" class="btn">Submit</button>
          <div class="note" style="margin-top:8px">We‚Äôll email you within 1‚Äì2 business days.</div>

          <div id="okMsg" class="success">Thank you! We‚Äôve received your request. We‚Äôll email you soon.</div>
          <div id="errMsg" class="error">Submission failed ‚Äî please try again in a moment.</div>
        </form>
      </section>

      <!-- ===== Right: Info card ===== -->
      <aside class="card side">
        <h3>What to expect</h3>
        <ul class="bullet">
          <li><b>Tailored match.</b> We pair you with a mentor experienced in your goal (AMC 8 ‚Üí US(A)JMO).</li>
          <li><b>Clear plan.</b> Tutors align sessions with your <a href="timeline.html">study timeline</a>.</li>
          <li><b>Flexible cadence.</b> Weekly or bi-weekly; online via Zoom.</li>
          <li><b>Transparent goals.</b> Skills check-ins, timed sets, and review of mistakes.</li>
        </ul>
        <p class="muted" style="margin-top:10px">
          Tip: Include your contest dates and typical availability in the message.
        </p>
      </aside>
    </div>
  </main>

  <footer class="container" style="text-align:center;margin:20px 0;color:#64748b">
    ¬© 2025 OlympiadPrep. Empowering tomorrow‚Äôs problem solvers.
  </footer>

  <!-- Submit via Formspree; optionally enrich with signed-in user -->
  <script type="module">
    const FORMSPREE_ENDPOINT = "https://formspree.io/f/mldwopzp";

    let currentUser = null;
    window.addEventListener("olympAuthReady", () => {
      try { currentUser = window.olympAuth?.getUser?.() || null; } catch {}
    });

    const form  = document.getElementById('tutor-form');
    const okMsg = document.getElementById('okMsg');
    const errMsg= document.getElementById('errMsg');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      okMsg.style.display = 'none';
      errMsg.style.display = 'none';

      const data = Object.fromEntries(new FormData(form).entries());
      if(!data.name || !data.email || !data.needs){
        errMsg.textContent = "Please fill out name, email, and what you need help with.";
        errMsg.style.display = 'block';
        return;
      }

      const payload = {
        name: data.name,
        email: data.email,
        gradeLevel: data.gradeLevel || '',
        state: data.state || '',
        school: data.school || '',
        classes: data.classes || '',
        needs: data.needs,
        page: location.href,
        userUid: currentUser?.uid || '',
        userDisplay: currentUser?.displayName || '',
        userEmail: currentUser?.email || ''
      };

      try {
        const r = await fetch(FORMSPREE_ENDPOINT, {
          method: "POST",
          headers: { "Accept":"application/json", "Content-Type":"application/json" },
          body: JSON.stringify(payload)
        });
        if (!r.ok) throw new Error("Email service returned " + r.status);
        okMsg.style.display = 'block';
        form.reset();
      } catch (err) {
        console.error(err);
        errMsg.style.display = 'block';
        errMsg.textContent = "Submission failed ‚Äî please try again.";
      }
    });
  </script>

  <!-- Auth module (same as other pages) -->
  <script type="module" src="./auth.js"></script>
</body>
</html>
